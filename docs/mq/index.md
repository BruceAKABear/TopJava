# 消息队列

## 为什么使用消息队列

应用解耦、流量消峰、异步处理

## 消息队列选型及依据
activemq

## 如何保证不被重复消费
### 什么是重复消费？

保持幂等性，也就是同一条消息执行多次是相同的

最常见的办法是在做处理之前，想查询然后执行

## 如何保证数据发送不丢失
rabbitmq confirm机制
rabbitmq本省要持久化，队列持久化、消息内容持久化
也有还没来得及持久化，就挂了
消费者来说，开启autoack，如果消费过程中自动ack了还没完成消费者挂了，那么就将autoack关闭，自己手动ack

## 如何保证顺序

## 消息百万积压

## 如何设计消息中间件架构
原理架构的研究，公司项目研究


1. 可伸缩性
2. 消息持久化
3. 故障机制
4. 消息确认机制



## rabbitmq 安装使用

安装erlang语言然后安装软件，然后配置管理插件

```
rabbitmq-plugins enable rabbitmq_management

```